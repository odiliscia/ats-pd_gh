#N canvas 126 74 890 702 12;
#X declare -path ../externals;
#N canvas 734 389 450 300 ats-openfile 0;
#X obj 120 55 openpanel;
#X msg 120 147 open \$1;
#X obj 120 24 inlet;
#X obj 120 178 outlet;
#X msg 194 96 set \$1;
#X obj 194 121 s filename;
#X connect 0 0 1 0;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 4 0 5 0;
#X restore 38 300 pd ats-openfile;
#X obj 38 266 bng 24 250 50 0 empty empty open_an_ATS_file -25 -10
0 10 -262144 -1 -1;
#X obj 425 296 nbx 8 24 -1e+37 1e+37 0 0 empty dur Duration 0 -8 0
10 -262144 -1 -1 0 256;
#X obj 556 296 nbx 8 24 -1e+37 1e+37 0 0 empty partials Partials 0
-8 0 10 -262144 -1 -1 0 256;
#X obj 689 294 nbx 8 24 -1e+37 1e+37 0 0 empty type Type 0 -8 0 10
-262144 -1 -1 0 256;
#N canvas 559 107 529 574 ats_get_header 0;
#X obj 108 16 inlet;
#X obj 110 157 list;
#X obj 110 195 unpack f f f;
#X obj -37 380 s dur;
#X obj 149 420 s partials;
#X obj 190 283 s type;
#X obj 108 38 t b a;
#X obj 171 492 s par_sel;
#X obj 171 387 pack;
#X msg 171 350 1;
#X obj 149 252 t f b f;
#X msg 171 454 \; par_sel range \$1 \$2;
#X obj -14 265 t f b f;
#X obj 7 338 pack;
#X msg 7 301 0;
#X msg 7 365 \; time_sel range \$1 \$2;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 12 0;
#X connect 2 1 10 0;
#X connect 2 2 5 0;
#X connect 6 0 1 0;
#X connect 6 1 1 1;
#X connect 8 0 11 0;
#X connect 9 0 8 0;
#X connect 10 0 4 0;
#X connect 10 1 9 0;
#X connect 10 2 8 1;
#X connect 11 0 7 0;
#X connect 12 0 3 0;
#X connect 12 1 14 0;
#X connect 12 2 13 1;
#X connect 13 0 15 0;
#X connect 14 0 13 0;
#X restore 230 490 pd ats_get_header;
#X text 31 159 ATSREAD EXAMPLE BY PABLO DI LISCIA;
#N canvas 505 171 745 459 get_partial 0;
#X text 98 27 partial#;
#X text 197 26 Freq.;
#X text 261 -15 Amp.;
#X obj 576 51 inlet;
#X text 542 22 partial to get data;
#X obj 182 105 f;
#X obj 278 129 f;
#X obj 219 217 select \$1;
#X obj 265 287 s freq;
#X obj 241 314 s amp;
#X obj 182 83 r freq;
#X obj 278 107 r amp;
#X obj 8 56 inlet;
#X text 3 28 time pointer;
#X obj 576 253 t b f;
#X obj 8 273 f;
#X obj 182 133 s frec_par;
#X obj 278 157 s amp_par;
#X obj 8 190 t b f;
#X obj 199 54 r fr;
#X obj 264 12 r am;
#X obj 100 56 r ind;
#X obj 83 197 f;
#X text 478 23 noise;
#X obj 475 156 f;
#X obj 475 132 r np;
#X obj 506 210 s ne_par;
#X obj 219 244 t b b b;
#X obj 219 343 s np;
#X obj 478 52 r nvp;
#X obj 395 55 r type;
#X obj 378 83 f;
#X obj 378 125 moses 3;
#X obj 378 57 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 264 37 t b f;
#X obj 461 82 f;
#X obj 461 54 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 461 106 t b f;
#X obj 378 149 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 378 189 s selb;
#X obj 83 166 r selb;
#X obj 8 325 s atsmess;
#X obj 475 181 t b f;
#X obj 77 239 r tptr;
#X obj 163 432 s fetchband;
#X obj 135 346 r type;
#X obj 118 405 moses 3;
#X obj 118 376 f;
#X obj 462 3 r clearnoise;
#X connect 3 0 14 0;
#X connect 5 0 16 0;
#X connect 6 0 17 0;
#X connect 7 0 27 0;
#X connect 10 0 5 0;
#X connect 11 0 6 0;
#X connect 12 0 18 0;
#X connect 14 0 15 0;
#X connect 14 1 7 1;
#X connect 15 0 41 0;
#X connect 18 0 15 0;
#X connect 18 0 47 0;
#X connect 18 1 15 1;
#X connect 19 0 5 1;
#X connect 20 0 34 0;
#X connect 21 0 22 1;
#X connect 22 0 7 0;
#X connect 24 0 42 0;
#X connect 25 0 24 0;
#X connect 27 0 28 0;
#X connect 27 1 9 0;
#X connect 27 2 8 0;
#X connect 29 0 35 1;
#X connect 30 0 31 1;
#X connect 31 0 32 0;
#X connect 32 0 38 0;
#X connect 32 1 36 0;
#X connect 33 0 31 0;
#X connect 34 0 33 0;
#X connect 34 1 6 1;
#X connect 35 0 37 0;
#X connect 36 0 35 0;
#X connect 37 0 39 0;
#X connect 37 1 24 1;
#X connect 38 0 39 0;
#X connect 40 0 22 0;
#X connect 42 1 26 0;
#X connect 43 0 15 0;
#X connect 45 0 47 1;
#X connect 46 1 44 0;
#X connect 47 0 46 0;
#X connect 48 0 35 0;
#X restore 423 428 pd get_partial;
#X obj 423 488 nbx 10 24 -1e+37 1e+37 0 0 empty frec_par frequency
0 -8 0 10 -262144 -1 -1 0 256;
#X obj 542 488 nbx 10 24 -1e+37 1e+37 0 0 empty amp_par amplitude 0
-8 0 10 -262144 -1 -1 0.25 256;
#X obj 518 400 nbx 8 24 1 164 0 0 empty par_sel Select_a_partial_here
88 12 0 10 -262144 -1 -1 1 256;
#X obj 423 355 nbx 8 24 0 3.63299 0 0 empty time_sel Select_analysis_time_here
88 12 0 10 -262144 -1 -1 0 256;
#X obj 38 539 s ind;
#X obj 76 564 s fr;
#X obj 114 589 s am;
#X obj 153 610 s ne;
#X obj 191 630 s nvp;
#X obj 521 616 nbx 10 24 -1e+37 1e+37 0 0 empty ne_band band_energy
8 -8 0 10 -262144 -1 -1 0 256;
#X obj 661 488 nbx 10 24 0 1e+37 0 0 empty ne_par noise_energy 0 -8
0 10 -262144 -1 -1 0 256;
#N canvas 748 82 567 702 what 0;
#X obj 379 17 inlet;
#X obj 425 90 moses 3;
#X obj 79 455 s frec_par;
#X obj 45 583 s amp_par;
#X obj 111 327 s ne_par;
#X obj 470 152 s atsmess;
#X msg 470 120 sines \, noise;
#X obj 425 216 s atsmess;
#X msg 425 184 sines \, nonoise;
#X obj 161 134 s time_sel;
#X obj 143 198 s par_sel;
#X obj 62 517 s band_sel;
#X obj 127 262 s num_band;
#X obj 96 390 s ne_band;
#X msg 161 97 \; time_sel set 0;
#X msg 111 288 \; ne_par set 0;
#X msg 94 351 \; ne_band set 0;
#X msg 78 416 \; frec_par set 0;
#X msg 62 479 \; band_sel set 0;
#X msg 45 542 \; amp_par set 0;
#X obj 45 68 t b b b b b b b b;
#X msg 127 224 \; num_band set 1;
#X msg 143 159 \; par_sel set 1;
#X obj 401 282 s clearnoise;
#X msg 401 255 0;
#X obj 379 48 t b b f;
#X connect 0 0 25 0;
#X connect 1 0 8 0;
#X connect 1 1 6 0;
#X connect 6 0 5 0;
#X connect 8 0 7 0;
#X connect 14 0 9 0;
#X connect 15 0 4 0;
#X connect 16 0 13 0;
#X connect 17 0 2 0;
#X connect 18 0 11 0;
#X connect 19 0 3 0;
#X connect 20 0 19 0;
#X connect 20 1 18 0;
#X connect 20 2 17 0;
#X connect 20 3 16 0;
#X connect 20 4 15 0;
#X connect 20 5 21 0;
#X connect 20 6 22 0;
#X connect 20 7 14 0;
#X connect 21 0 12 0;
#X connect 22 0 10 0;
#X connect 24 0 23 0;
#X connect 25 0 20 0;
#X connect 25 1 24 0;
#X connect 25 2 1 0;
#X restore 689 330 pd what;
#X msg 426 217;
#X obj 426 196 r filename;
#X obj 38 349 r atsmess;
#X obj 38 376 atsread --------------------;
#N canvas 140 225 450 300 inits 0;
#X msg 120 54 set;
#X obj 120 23 loadbang;
#X obj 120 94 s filename;
#X obj 71 178 s num_band;
#X msg 71 155 1;
#X obj 157 175 s par_sel;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 1 0 4 0;
#X connect 4 0 3 0;
#X connect 4 0 5 0;
#X restore 38 197 pd inits;
#N canvas 66 82 1301 714 get_band 0;
#X obj 63 -3326 inlet;
#X text 58 -3355 band to get data;
#X obj 108 -3064 s atsmess;
#X obj 80 -3007 r ne;
#X obj 63 -2940 f;
#X obj 63 -2911 s ne_band;
#X obj 80 -2979 unpack f;
#X obj 63 -3157 t b b f;
#X obj 85 -3120 s tptr;
#X msg 108 -3089 setnz \$1..\$1;
#X obj 63 -3287 + 1;
#X obj 183 -3137 s num_band;
#X obj 258 -3331 r fetchband;
#X obj 258 -3304 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 73 -3038 r clearnoise;
#X connect 0 0 10 0;
#X connect 3 0 6 0;
#X connect 4 0 5 0;
#X connect 6 0 4 1;
#X connect 7 0 4 0;
#X connect 7 1 8 0;
#X connect 7 2 9 0;
#X connect 7 2 11 0;
#X connect 9 0 2 0;
#X connect 10 0 7 0;
#X connect 12 0 13 0;
#X connect 13 0 10 0;
#X connect 14 0 4 0;
#X restore 422 571 pd get_band;
#X obj 422 553 hradio 15 1 0 25 empty band_sel Select_a_critical_band_here
0 -8 0 10 -262144 -1 -1 11;
#X obj 423 616 nbx 8 24 1 25 0 0 empty num_band band_number 8 -8 0
10 -262144 -1 -1 1 256;
#X text 76 538 <----------------------Partial Indexes;
#X text 111 561 <-----------------Partial Frequencies;
#X text 146 585 <------------Partial Amplitudes;
#X text 187 608 <------Critical Band Energy;
#X text 237 630 Partial Noise Energy;
#X text 224 511 (dur \, partials \, type);
#N canvas 461 119 519 480 ats_messages 0;
#X msg 78 139 noise;
#X msg 77 167 nonoise;
#X msg 76 209 sines;
#X msg 75 239 nosines;
#X msg 78 289 set 1..5;
#X msg 79 373 setnz 1..5;
#X text 135 150 to output residual data or not;
#X text 128 219 to output deterministic data or not;
#X text -114 -67 VALID MESSAGES FOR atsread;
#X obj -112 198 s atsmess;
#X msg -112 -14 open "filename";
#X text -116 -35 to open an ATS file named "filename";
#X text -100 36 Once an ATS file is open \, a float value is interpreted
as a time value and cause the output of the corresponding data (that
is \, the frequency \, amplitude and noise for each one of the selected
partials \, plus the noise energy values for each one of the selected
critical bands). The following are other possible messages for atsread)
;
#X text 75 269 to output data only from partials 1 to 5 or not;
#X text 78 353 to output data only from residual bands 1 to 5 or not
;
#X msg 78 318 unset 1..5;
#X msg 79 402 unsetnz 1..5;
#X connect 0 0 9 0;
#X connect 1 0 9 0;
#X connect 2 0 9 0;
#X connect 3 0 9 0;
#X connect 4 0 9 0;
#X connect 5 0 9 0;
#X connect 10 0 9 0;
#X connect 15 0 9 0;
#X connect 16 0 9 0;
#X restore 224 217 pd ats_messages;
#X text 187 194 (see possible messages here);
#X text 34 11 atsread EXAMPLE BY PABLO DI LISCIA odiliscia@unq.edu.ar
Programa de Investigacion "Sistemas Temporales y Sintesis Espacial
en el Arte Sonoro" http://stseas.web.unq.edu.ar/ odiliscia@unq.edu.ar
This example shows how to get and display all the data of an ATS analysis.
;
#X obj 36 666 declare -path ../externals;
#X connect 0 0 23 0;
#X connect 1 0 0 0;
#X connect 4 0 19 0;
#X connect 10 0 7 1;
#X connect 11 0 7 0;
#X connect 21 0 20 0;
#X connect 22 0 23 0;
#X connect 23 0 12 0;
#X connect 23 1 13 0;
#X connect 23 2 14 0;
#X connect 23 3 15 0;
#X connect 23 4 16 0;
#X connect 23 5 5 0;
#X connect 26 0 25 0;
